# This LDA description wraps the NERC Vocabulary SPARQL endpoint:
#
# http://vocab.nerc.ac.uk/sparql/sparql
#
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix spec: <http://localhost:8080/api-config#> .
@prefix api:  <http://purl.org/linked-data/api/vocab#> .
@prefix elda: <http://www.epimorphics.com/vocabularies/lda#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .

spec:minimal a api:API
  ; api:base "/"
  ; rdfs:label "a minimal demonstration API"
  ; api:sparqlEndpoint <http://vocab.nerc.ac.uk/sparql/sparql>
  ; api:defaultViewer api:labelledDescribeViewer
  ; api:defaultFormatter spec:htmlFormatter 
  ; api:viewer api:describeViewer, api:labelledDescribeViewer, api:basicViewer
  ; api:endpoint 
      spec:collections
  ; api:variable [api:name "_exceptionIfEmpty" ; api:value "no"]
  ; api:variable [api:name "_resourceRoot"     ; api:value "/lda-assets/"]
  ; api:variable [api:name "_velocityRoot"     ; api:value "/var/elda-flower/lda-assets/vm"]
  ; elda:rewriteResultURIs  [ 
      elda:ifStarts "http://vocab.nerc.ac.uk"; elda:replaceStartBy "http://localhost:8080"
  ]
  .
  
spec:htmlFormatter a elda:VelocityFormatter
  ; api:name "html"
  ; elda:className "com.epimorphics.lda.renderers.VelocityRendererFactory"
  ; api:mimeType "text/html"
  .

#
# List 'collections' endpoint
#
spec:collections a api:ListEndpoint
    ; api:name                "collection" 
    ; rdfs:comment            "Lists the collections"@en
    ; api:uriTemplate         "/collection"
    ; api:defaultPageSize     20
    ; api:selector            [
        api:where "?item a skos:Collection."
      ; api:orderBy "?label";
    ]
    ; api:exampleRequestPath  "/collection"
    .
